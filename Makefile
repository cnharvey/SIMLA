###################################################################
# SIMLA Makefile                               			  #
# Date:    5 Feb 2014                                         	  #
###################################################################

###################################################################
# compiler flags                                                  #
###################################################################

ALTHOST =
FCOMP       = gfortran   ## ifort


####################################################################
# site-independent files                                           #
####################################################################
FILES = simla3_0.o simla_subroutines.o qedroutines.o  


###################################################################
# FORTRAN compilation rule                                        #
###################################################################
.SUFFIXES: .f .o

# how to make a .o-file from a .f-file:
.f.o:
	$(FCOMP)  -c $*.f

.SUFFIXES: .f90 .o

# how to make a .o-file from a .f-file:
.f90.o:
	$(FCOMP)  -c $*.f90

####################################################################
# link simla
####################################################################
simla: include.i $(FILES) 
	$(FCOMP)  -o simla3 $(FILES) 


####################################################################
# recompile files when include files changed                       # 
# (using dummy "include.i"):                                       #
####################################################################

include.i: simla3_0.f90 simla_subroutines.f90 qedroutines.f90 
	touch include.i 
	rm -f simla3_0.o simla_subroutines.o qedroutines.o 


####################################################################
# remove all object files and executable of simla                  +
####################################################################
clean:
	@rm -f simla $(FILES)
	@rm -f *.mod

vclean:
	@rm -f simla $(FILES)
	@rm -f *.mod
	@rm -f *.dat
####################################################################
# clean include.i                                                  #
####################################################################
clean_include:
	@rm -f include.i


####################################################################
# clean all
####################################################################
clean_all: clean clean_include




